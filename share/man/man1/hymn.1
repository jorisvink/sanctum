.nh
.ad 1
.TH HYMN 1
.SH NAME
hymn \- The sanctum configuration tool.
.SH SYNOPSIS
.B hymn
[cmd] [cmdopts]
.SH DESCRIPTION
The
.I hymn
tool can be used to configure sanctum tunnels on the system.

.SH COMMANDS
.TP
.BR add
Adds a new tunnel to the system.
.TP
.BR bridge
Attach a bridge interface to an existing tunnel.
.TP
.BR cathedral
Change the configured cathedral for an existing tunnel.
.TR
.BR del
Removes a tunnel from the system.
.TP
.BR down
Brings down a tunnel.
.TP
.BR mtu
Changes the MTU for an existing tunnel.
.TP
.BR list
Show all configured tunnels and their status.
.TP
.BR liturgy
Adds a new liturgy to the system.
.TP
.BR name
Give an existing tunnel a friendly name, this friendly name can be used
throughout all other
.I hymn
commands.
.TP
.BR status
Show the status for a given tunnel, or all tunnels if no argument was given.
.TP
.BR remembrance
Toggle the use of a remembrance on an existing tunnel.
.TP
.BR restart
Restarts a tunnel by bringing it down, and then up again.
.TP
.BR route
Add a new route to an existing tunnel.
.TP
.BR up
Brings up a tunnel.

.SH FILES
The
.I hymn
tool places all configurations under
.I /etc/hymn.
These configurations are named using the following naming convention:
.I <flock>-<src>-<dst>.conf

.SH EXAMPLES
.TP
.BR Add
Adding a new tunnel is done with the
.I add
command. An example can be seen below, where we add a new tunnel from
peer
.I 01
to peer
.I 02,
with our tunnel ip set to
.I 192.168.10.1/24
using a preshared secret under
.I /etc/sanctum.key
and running
.I purgatory-tx,
.I purgatory-rx,
.I heaven-tx,
and
.I heaven-rx
as the given user
.I sanctum

.eo
# hymn add 01-02 tunnel 192.168.10.1/24 mtu 1422 \
  local 1.2.3.4:1234 secret /etc/sanctum.key \
  peer 4.3.2.1:4321 user sanctum
.ec

If we are adding a tunnel that will use a cathedral we can also use the
.I add
command. In the example below we configure a tunnel that uses a cathedral
located at
.I 1.2.3.4:1234
where our device has the
.I cs-id
0x30b4c396 and is part of the flock
.I 0xdeadbeefcafebabe.
Our
.I Key-Encryption-Key (KEK)
is located under /etc/device.kek, the cathedral secret is found under
.I /etc/cathedral.key,
and the
.I Cathedral Offer Signing Key (COSK)
is located under
.I /etc/cathedral.cosk

.eo
# hymn add deadbeefcafebabe-01-02 tunnel 192.168.10.1/24 \
  mtu 1422 cathedral 1.2.3.4:1234 kek /etc/device.kek \
  identity 30b4c39:/etc/cathedral.key \
  cosk /etc/cathedral.cosk user sanctum
.ec

.SH AUTHORS

.I hymn
was written by Joris Vink <joris@sanctorum.se> and is licensed under
the ISC license.

.SH "SEE ALSO"
.BR ambry(1),
.BR sanctum(1),
.BR sanctum.conf(5)
